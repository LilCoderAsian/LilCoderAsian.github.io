---
title: "RicePrice"
format: html
---

```{r setup, include=FALSE}
# Load necessary libraries
library(dplyr)
library(leaflet)
library(maps)
library(tidyverse)
```

```{r, echo=FALSE}
rice_price <- read.csv("C:\\Users\\LilAsian\\Downloads\\riceprice.csv")

# Prepare the world map data
world_map <- map_data("world")

# Define your Asian countries
asian_countries <- c("China", "India", "Japan", "Viet Nam", "Thailand", "Indonesia", "Bangladesh")

filtered_data <- rice_price %>%
  filter(Country.Region %in% asian_countries & Commodity == "Rice" & Element == "Exports (ITY)")

# Create the export_summary data
export_summary <- filtered_data %>%
  group_by(Country.Region) %>%
  summarise(Value = sum(Value)) %>%
  mutate(Country.Region = recode(Country.Region, "Vietnam" = "Viet Nam"))

# Get coordinates for Asian countries (you may want to adjust these)
country_coords <- data.frame(
  Country.Region = c("China", "India", "Japan", "Viet Nam", "Thailand", "Indonesia", "Bangladesh"),
  lat = c(35.8617, 20.5937, 36.2048, 14.0583, 15.8700, -0.7893, 23.685),
  long = c(104.1954, 78.9629, 138.2529, 108.2772, 100.9925, 113.9213, 90.3563)
)

# Merge coordinates with export summary
export_summary <- export_summary %>%
  left_join(country_coords, by = "Country.Region")

# Create the leaflet map
leaflet(data = export_summary) %>%
  addTiles() %>%
  addCircles(lng = ~long, lat = ~lat, weight = 1,
             radius = ~Value * 10,  # Adjust size based on the value (scale down)
             popup = ~paste(Country.Region, ": ", Value, "Million tonnes"),
             color = "blue", fillOpacity = 0.5) %>%
  setView(lng = 105, lat = 20, zoom = 3)  # Centering the map over Asia
```